{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019/12/10/using-create-react-app-with-fable/","result":{"data":{"site":{"siteMetadata":{"title":"blog.nojaf.com","author":"Florian Verdonck"}},"markdownRemark":{"id":"2c7491a7-99ab-5ac2-838a-fc30009244ed","excerpt":"Introduction 2019 has been a great year for me for all things F# related! I helped out with the organization of FableConf in Antwerp, gave a webinar at…","html":"<h2 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>2019 has been a great year for me for all things F# related! I helped out with the organization of <a href=\"https://axxes.com/en/net-2-en/axxes-proud-host-of-fableconf-2019/\">FableConf in Antwerp</a>, gave a <a href=\"https://blog.jetbrains.com/dotnet/2019/07/24/webinar-from-fsharp-to-javascript-with-fable/\">webinar at JetBrains</a> and was able to release <a href=\"https://axxes.com/en/net/fantomas-3-0-over-and-above/\">Fantomas 3.0</a>.\nTo wrap up the decade I’m writing this post as part of the <strong><a href=\"https://sergeytihon.com/2019/11/05/f-advent-calendar-in-english-2019/\">F# Advent Calendar in English 2019</a></strong>.<br/>\nI had fun <a href=\"/2018/12/17/writing-a-vscode-extension-with-fable-2-1/\">last year</a> and I wish to continue this trend.</p>\n<h3 id=\"to-feliz-or-not-to-feliz\" style=\"position:relative;\"><a href=\"#to-feliz-or-not-to-feliz\" aria-label=\"to feliz or not to feliz permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To Feliz or not to Feliz</h3>\n<p><a href=\"https://zaid-ajaj.github.io/Feliz/\">Feliz</a> has been receiving some traction in the community and at one-point Zaid asked me what I thought about it.\nMy reply was, well it’s not for everybody 😅.\nIn this blog post I’m going to explore yet another alternative of creating views in Elmish, by using React as is.</p>\n<h3 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h3>\n<p>In blog post we are going to combine <a href=\"https://fable.io/\">Fable</a> with <a href=\"https://create-react-app.dev/\">Create React App</a>.\nWriting our <strong>views with vanilla React</strong> components and our <strong>logic in F#</strong>.</p>\n<h2 id=\"capital-guardian\" style=\"position:relative;\"><a href=\"#capital-guardian\" aria-label=\"capital guardian permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Capital Guardian</h2>\n<p>Recently I’ve had the need to track where my money is going. Or as we say in Belgium, there is a hole in my wallet somehow.\nObviously, using an existing online tool is too easy so I decided to build something myself.</p>\n<p>The domain is a bit more complex than you would think at first glance. The basics are simple, I earn money and I spend it.\nCapture all those transactions and you know the balance. However, some expenses are recurring or sometimes you want to spread an bigger expense over multiple months.\nAnyway, we aren’t going to cover the entire application, but you can sort of see where this could go.<br />\nIt is technically challenging enough to serve as a good exercise in domain modeling and <strong>event sourcing</strong>.</p>\n<h3 id=\"architecture\" style=\"position:relative;\"><a href=\"#architecture\" aria-label=\"architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Architecture</h3>\n<p>Since we are doing event sourcing I’m eager to use <strong>Azure Functions</strong> and <a href=\"https://github.com/Dzoukr/CosmoStore\">Cosmo store</a> for the back-end.\nNonetheless, this post is about the front-end and we will focus solely on that.</p>\n<h2 id=\"create-react-app-and-fable\" style=\"position:relative;\"><a href=\"#create-react-app-and-fable\" aria-label=\"create react app and fable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create React App and Fable</h2>\n<p>As mentioned, the first thing we want to do is scaffold a new project with Create React App.<br />\nI’m a Yarn guy, so:</p>\n<blockquote>\n<p>yarn create react-app capital-guardian</p>\n</blockquote>\n<p><em>Create React Application</em> has amazing documentation and the key takeaway here is that I don’t have to do any crazy webpack shizzle.\nIt just works © and I don’t have to maintain anything.</p>\n<h3 id=\"compiling-fsharp\" style=\"position:relative;\"><a href=\"#compiling-fsharp\" aria-label=\"compiling fsharp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compiling FSharp</h3>\n<p>There are a few moving pieces in setting up the front-end development experience.\nThe F# files should be compiled to ES6 JavaScript before the React development server starts.\nWe can solve this problem using a FAKE script.</p>\n<h3 id=\"paket\" style=\"position:relative;\"><a href=\"#paket\" aria-label=\"paket permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Paket</h3>\n<p>First let’s install some .NET Core 3 tools.\nLet’s use the new and <a href=\"http://www.navision-blog.de/blog/2019/12/02/announcing-paket-6-alpha/\">shiny Paket 6</a>!\nPaket is useful in this case because we are using FAKE and will compile <a href=\"https://axxes.com/en/net/compiling-f-scripts-with-fable-2-2/\">F# scripts with Fable</a>.</p>\n<blockquote>\n<p>dotnet new tool-manifest</p>\n<p>dotnet tool install paket</p>\n<p>dotnet tool install fake-cli</p>\n</blockquote>\n<p>Setup our .NET dependencies:</p>\n<blockquote>\n<p>dotnet paket init</p>\n</blockquote>\n<p>Change <code class=\"language-text\">paket.dependencies</code> to</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">group client\nstorage:none\nsource: https://api.nuget.org/v3/index.json\nframework: netstandard2.0\n\nnuget Fable.React\nnuget Fable.Elmish\nnuget Fable.Promise\nnuget Fable.Fetch\nnuget Thoth.Json\n\ngroup build\nstorage:none\nsource: https://api.nuget.org/v3/index.json\nframework: netstandard2.0\nnuget Fake.Core.Target\nnuget Fake.IO.FileSystem\nnuget Fake.JavaScript.Yarn\nnuget Fake.DotNet.Paket\nnuget Fantomas</code></pre></div>\n<p>And install everything with:</p>\n<blockquote>\n<p>dotnet paket install</p>\n</blockquote>\n<h3 id=\"fake\" style=\"position:relative;\"><a href=\"#fake\" aria-label=\"fake permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FAKE</h3>\n<p>Next, create a <code class=\"language-text\">build.fsx</code> script:</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token preprocessor property\">#r </span><span class=\"token string\">\"paket: groupref build //\"</span>\n<span class=\"token preprocessor property\">#load </span><span class=\"token string\">\".fake/build.fsx/intellisense.fsx\"</span>\n\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>Core\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>Core<span class=\"token punctuation\">.</span>TargetOperators\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>DotNet\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>IO\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>IO<span class=\"token punctuation\">.</span>FileSystemOperators\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>IO<span class=\"token punctuation\">.</span>Globbing<span class=\"token punctuation\">.</span>Operators\n<span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>JavaScript\n<span class=\"token keyword\">open</span> System\n<span class=\"token keyword\">open</span> Fantomas<span class=\"token punctuation\">.</span>FakeHelpers\n<span class=\"token keyword\">open</span> Fantomas<span class=\"token punctuation\">.</span>FormatConfig\n\n<span class=\"token keyword\">let</span> clientPath <span class=\"token operator\">=</span> Path<span class=\"token punctuation\">.</span>getFullName <span class=\"token string\">\"./\"</span>\n<span class=\"token keyword\">let</span> setYarnWorkingDirectory <span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Yarn<span class=\"token punctuation\">.</span>YarnParams</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> args <span class=\"token keyword\">with</span> WorkingDirectory <span class=\"token operator\">=</span> clientPath <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">module</span> Paket <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> runCmd cmd args <span class=\"token operator\">=</span>\n        CreateProcess<span class=\"token punctuation\">.</span>fromRawCommand cmd args\n        <span class=\"token operator\">|></span> Proc<span class=\"token punctuation\">.</span>run\n        <span class=\"token operator\">|></span> ignore\n\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> paket args <span class=\"token operator\">=</span> runCmd <span class=\"token string\">\"dotnet\"</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"paket\"</span> <span class=\"token operator\">::</span> args<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">let</span> ``generate load script``<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> paket <span class=\"token punctuation\">[</span> <span class=\"token string\">\"generate-load-scripts\"</span><span class=\"token punctuation\">;</span> <span class=\"token string\">\"-f\"</span><span class=\"token punctuation\">;</span> <span class=\"token string\">\"netstandard2.0\"</span><span class=\"token punctuation\">;</span> <span class=\"token string\">\"-t\"</span><span class=\"token punctuation\">;</span> <span class=\"token string\">\"fsx\"</span> <span class=\"token punctuation\">]</span>\n\nTarget<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Clean\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span>\n    Shell<span class=\"token punctuation\">.</span>rm_rf <span class=\"token punctuation\">(</span>clientPath <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\".fable\"</span><span class=\"token punctuation\">)</span>\n    Shell<span class=\"token punctuation\">.</span>rm_rf <span class=\"token punctuation\">(</span>clientPath <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\"src\"</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\"bin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nTarget<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Yarn\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span> Yarn<span class=\"token punctuation\">.</span>installPureLock setYarnWorkingDirectory<span class=\"token punctuation\">)</span>\n\nTarget<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Paket\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span>\n    Paket<span class=\"token punctuation\">.</span>restore id\n    Shell<span class=\"token punctuation\">.</span>rm_rf <span class=\"token punctuation\">(</span><span class=\"token string\">\".paket\"</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\"load\"</span><span class=\"token punctuation\">)</span>\n    Paket<span class=\"token punctuation\">.</span>``generate load script``<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nTarget<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Build\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span> Yarn<span class=\"token punctuation\">.</span>exec <span class=\"token string\">\"build\"</span> setYarnWorkingDirectory<span class=\"token punctuation\">)</span>\n\n<span class=\"token string\">\"Clean\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Paket\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Yarn\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Build\"</span>\n\nTarget<span class=\"token punctuation\">.</span>runOrDefault <span class=\"token string\">\"Build\"</span></code></pre></div>\n<p>As a first version of our build script we can install our dependencies and build our application.\nNotice the little helper module to <a href=\"https://fsprojects.github.io/Paket/paket-generate-load-scripts.html\">generate the load script</a>.\nKeep in mind that nothing Fable related is in place yet.</p>\n<h3 id=\"fable\" style=\"position:relative;\"><a href=\"#fable\" aria-label=\"fable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fable</h3>\n<p>Install <code class=\"language-text\">fable-splitter</code> &#x26; <code class=\"language-text\">fable-compiler</code> and add a script to our package.json to start the splitter.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"capital-guardian\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"fable-compiler\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.4.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"fable-splitter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.12.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-dom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.12.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-scripts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3.2.0\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"eject\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts eject\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"fable\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fable-splitter fsharp/Main.fsx -o src/bin\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prebuild\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn fable\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then create <code class=\"language-text\">Main.fsx</code> in a <code class=\"language-text\">fsharp</code> folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token preprocessor property\">#load </span><span class=\"token string\">\"../.paket/load/netstandard2.0/client/client.group.fsx\"</span>\n\nprintfn <span class=\"token string\">\"Fable compiled this\"</span></code></pre></div>\n<p>Running <code class=\"language-text\">yarn fable</code> now compiles the F# to <code class=\"language-text\">src/bin</code>.</p>\n<blockquote>\n<p>yarn add fable-splitter fable-compiler</p>\n</blockquote>\n<p>Add <code class=\"language-text\">import './bin/Main';</code> to <code class=\"language-text\">App.js</code> and start the development server using <code class=\"language-text\">yarn start</code>.</p>\n<h3 id=\"adjust-create-react-app\" style=\"position:relative;\"><a href=\"#adjust-create-react-app\" aria-label=\"adjust create react app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adjust Create React App</h3>\n<p>And just like that:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4dcb41061c0d3a51325cd22bb7f9714/e3189/cra-failed-to-compile.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAi0lEQVR42nXQ2w7DIAgGYN//QdeDeKitE5LCv+i2i2Ut5NPABSQ4poBGAbx4aGP0MLP+/Oi9kWZQ1Vuupow0zcPuaagh4qCAsvpRF09olFDnvjxDa4Ue/4wFbg8RZfHYphXxMSNOb31Qi2l4xgRJG5jy+K+G6X5AmeFEBMwfIuh1Y8Z5Ku7Cvie48AJ2FjcizeytagAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Create React App failed to compile\"\n        title=\"Create React App failed to compile\"\n        src=\"/static/f4dcb41061c0d3a51325cd22bb7f9714/fcda8/cra-failed-to-compile.png\"\n        srcset=\"/static/f4dcb41061c0d3a51325cd22bb7f9714/12f09/cra-failed-to-compile.png 148w,\n/static/f4dcb41061c0d3a51325cd22bb7f9714/e4a3f/cra-failed-to-compile.png 295w,\n/static/f4dcb41061c0d3a51325cd22bb7f9714/fcda8/cra-failed-to-compile.png 590w,\n/static/f4dcb41061c0d3a51325cd22bb7f9714/efc66/cra-failed-to-compile.png 885w,\n/static/f4dcb41061c0d3a51325cd22bb7f9714/e3189/cra-failed-to-compile.png 1035w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Well <em>Create React Application</em> does JavaScript linting as well and it is rejecting the compiled F# code.\nOr at least a part of the <code class=\"language-text\">Fable.Core</code> library in this case.\nWe want to tell the linter that it should ignore the <code class=\"language-text\">src/bin</code> folder.</p>\n<p>Create an <code class=\"language-text\">.eslintignore</code> file and add <code class=\"language-text\">src/bin/**</code> to it.\nFor the ignore file to be picked up add an <code class=\"language-text\">.env</code> file with <code class=\"language-text\">EXTEND_ESLINT=true</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf4e2598e89f1a3b43f5c1898c69e530/2ba99/fable-compiled-this.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB60lEQVR42o2S224SURSG+xJNUWA4DIcB2gIz0IHChCkD1lqISbWVFksPhFZTrdakF2o0JiZe9nGMiRfGxMSqL0I08Y476GdmU2prUdzJyp7M3vnWv/5/j4UnUwzKs7aM984S0uYq3pUlpEYNT+0W0t0VglkDJaKKe8q5CkVV3r57z/cfP2m324yJC0oS/+IN3DsNQjM5pI0azoMdnActAmYR2Sojl6+hhBJDgR8+fqJ3ckKn0/kN9FUWcbfW8d2scuXpHo5Xj5l4/QT3dl00k+cslPBlYDCS5PjLN+zV6/VOgREV/8J1rh7ew1NfZuLNIeNHzxk/eobrwbZoFDBM0XgY8PPxVwHsdrvnFFYrwjt7NOfDJo6Xj3C82BdeBuYsZKv0V4WXgZG+h677mwRzBaStNeGna28LuVQWNtj7/wPtUKoVXPtNpGYd9+5GH9pax73bwLt6m7CaQYlqo4EiKSWJrGXw2WqKFj6r1K+ihbdcJpDUCYXiZ7BwTPuHwphGPJVD1fKo8Qxacpb41AxqIiu+1biOmsqj6QWiU+kLsKFA+x2lsyZZo4RulDCKC+izRTJGibw5j563xJlhzjOZ0EcDB4/TPrBHD0yn8Z+O6yuY4v+gBrCRI591jKVQptOE1awIQQTxRwijFP4C4Y3SrKabC84AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Fable compiled this\"\n        title=\"Fable compiled this\"\n        src=\"/static/bf4e2598e89f1a3b43f5c1898c69e530/fcda8/fable-compiled-this.png\"\n        srcset=\"/static/bf4e2598e89f1a3b43f5c1898c69e530/12f09/fable-compiled-this.png 148w,\n/static/bf4e2598e89f1a3b43f5c1898c69e530/e4a3f/fable-compiled-this.png 295w,\n/static/bf4e2598e89f1a3b43f5c1898c69e530/fcda8/fable-compiled-this.png 590w,\n/static/bf4e2598e89f1a3b43f5c1898c69e530/efc66/fable-compiled-this.png 885w,\n/static/bf4e2598e89f1a3b43f5c1898c69e530/c83ae/fable-compiled-this.png 1180w,\n/static/bf4e2598e89f1a3b43f5c1898c69e530/2ba99/fable-compiled-this.png 1221w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Great! At this point running <code class=\"language-text\">dotnet fake run build.fsx</code> will compile the F# and create a production build of Create React App.</p>\n<h3 id=\"watch-mode\" style=\"position:relative;\"><a href=\"#watch-mode\" aria-label=\"watch mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Watch mode</h3>\n<p><code class=\"language-text\">fable-splitter</code> has a watch mode, however using this can lead some chicken and egg type of problem.\nIf the F# has never been compiled and <em>Create React Application</em> is started it will fail. A possible solution could be to compile the F#, start <em>Create React Application</em> and then compile F# in watch mode.\nUnfortunately, this is an expensive operation (we would start the Fable daemon twice). A workaround can be created in our build script.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\">Target<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Watch\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span>\n    <span class=\"token keyword\">let</span> fableOutput output <span class=\"token operator\">=</span>\n        Trace<span class=\"token punctuation\">.</span>tracefn <span class=\"token string\">\"%s\"</span> output\n        <span class=\"token keyword\">if</span> output <span class=\"token operator\">=</span> <span class=\"token string\">\"fable: Watching...\"</span> <span class=\"token keyword\">then</span>\n            Yarn<span class=\"token punctuation\">.</span>exec <span class=\"token string\">\"start\"</span> setYarnWorkingDirectory\n\n    <span class=\"token keyword\">let</span> fableError output <span class=\"token operator\">=</span> Trace<span class=\"token punctuation\">.</span>traceErrorfn <span class=\"token string\">\"\\n%s\\n\"</span> output\n\n    <span class=\"token keyword\">let</span> compileFable <span class=\"token operator\">=</span>\n        CreateProcess<span class=\"token punctuation\">.</span>fromRawCommand Yarn<span class=\"token punctuation\">.</span>defaultYarnParams<span class=\"token punctuation\">.</span>YarnFilePath <span class=\"token punctuation\">[</span><span class=\"token string\">\"fable\"</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"--watch\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token operator\">|></span> CreateProcess<span class=\"token punctuation\">.</span>withWorkingDirectory clientPath\n        <span class=\"token operator\">|></span> CreateProcess<span class=\"token punctuation\">.</span>redirectOutput\n        <span class=\"token operator\">|></span> CreateProcess<span class=\"token punctuation\">.</span>withOutputEventsNotNull fableOutput fableError\n        <span class=\"token operator\">|></span> Proc<span class=\"token punctuation\">.</span>startAndAwait\n        <span class=\"token operator\">|></span> Async<span class=\"token punctuation\">.</span>Ignore\n\n    Async<span class=\"token punctuation\">.</span>RunSynchronously compileFable<span class=\"token punctuation\">)</span>\n\n<span class=\"token string\">\"Clean\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Paket\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Yarn\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Build\"</span>\n\n<span class=\"token string\">\"Paket\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Yarn\"</span> <span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token string\">\"Watch\"</span>\n\nTarget<span class=\"token punctuation\">.</span>runOrDefault <span class=\"token string\">\"Build\"</span></code></pre></div>\n<p>Admittedly this is a bit of hack, first we start the splitter process and read all the output.\nIf the output says <code class=\"language-text\">fable: Watching...</code>, it means the initial JavaScript was emitted (to <code class=\"language-text\">src/bin</code>) and will continue to watch our F# files.\nOnce we have that initial JavaScript output, we can start <em>Create React Application</em>.</p>\n<p>Any changes to either <code class=\"language-text\">*.js</code> or  <code class=\"language-text\">*.fsx</code> files will trigger a browser reload and this provides us a rich developer experience.</p>\n<h2 id=\"enter-elmish\" style=\"position:relative;\"><a href=\"#enter-elmish\" aria-label=\"enter elmish permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enter Elmish</h2>\n<p>We wish to use <code class=\"language-text\">Fable.Elmish</code> for the purpose of what React Redux is commonly used for.</p>\n<p>position it like how <a href=\"https://react-redux.js.org/\">React Redux</a> works.\nA top-level component will contain all the state and expose actions and selections via hooks.</p>\n<h3 id=\"react-context\" style=\"position:relative;\"><a href=\"#react-context\" aria-label=\"react context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Context</h3>\n<p>First, we need a wrapper component that will start an <strong>Elmish program</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token preprocessor property\">#load </span><span class=\"token string\">\"../.paket/load/netstandard2.0/client/client.group.fsx\"</span>\n\n<span class=\"token keyword\">open</span> Elmish\n<span class=\"token keyword\">open</span> System\n<span class=\"token keyword\">open</span> Fable<span class=\"token punctuation\">.</span>React\n<span class=\"token keyword\">open</span> Fable<span class=\"token punctuation\">.</span>Core\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Amount</span> <span class=\"token operator\">=</span> double\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Year</span> <span class=\"token operator\">=</span> int\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Month</span> <span class=\"token operator\">=</span> int\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Id</span> <span class=\"token operator\">=</span> Guid\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Transaction</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">{</span> Name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">string</span>\n      Amount<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Amount</span>\n      Rule<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Id</span> option\n      Created<span class=\"token punctuation\">:</span> <span class=\"token class-name\">DateTime</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RecurringRule</span> <span class=\"token operator\">=</span> Id <span class=\"token operator\">*</span> string <span class=\"token operator\">*</span> Amount\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ProcessedRecurringRule</span> <span class=\"token operator\">=</span> Id <span class=\"token operator\">*</span> Year <span class=\"token operator\">*</span> Month\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Event</span> <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> AddExpense <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n    <span class=\"token operator\">|</span> AddIncome <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n    <span class=\"token operator\">|</span> AddRecurringIncomingRule <span class=\"token keyword\">of</span> <span class=\"token class-name\">RecurringRule</span>\n    <span class=\"token operator\">|</span> AddRecurringExpenseRule <span class=\"token keyword\">of</span> <span class=\"token class-name\">RecurringRule</span>\n    <span class=\"token operator\">|</span> CancelRecurringRule <span class=\"token keyword\">of</span> <span class=\"token class-name\">Id <span class=\"token operator\">*</span> DateTime</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> sampleEvents <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> rentRuleId <span class=\"token operator\">=</span> Guid<span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"92C3A64D-EE6E-4536-9A83-04682D21E3F2\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> wageId <span class=\"token operator\">=</span> Guid<span class=\"token punctuation\">.</span><span class=\"token function\">Parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DD860AB1-5A07-49D7-831D-4723C1DB8284\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> now <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span>Now\n\n    <span class=\"token punctuation\">[</span> <span class=\"token function\">AddRecurringExpenseRule</span><span class=\"token punctuation\">(</span>rentRuleId<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Rent\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">800</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">AddRecurringIncomingRule</span><span class=\"token punctuation\">(</span>wageId<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Wage\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n      AddExpense\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> <span class=\"token string\">\"Rent July\"</span>\n             Amount <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">.</span>\n             Rule <span class=\"token operator\">=</span> Some rentRuleId\n             Created <span class=\"token operator\">=</span> now <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      AddIncome\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> <span class=\"token string\">\"Wage July\"</span>\n             Amount <span class=\"token operator\">=</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">.</span>\n             Rule <span class=\"token operator\">=</span> Some wageId\n             Created <span class=\"token operator\">=</span> now <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      AddExpense\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> <span class=\"token string\">\"Movie night\"</span>\n             Amount <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">.</span>\n             Rule <span class=\"token operator\">=</span> None\n             Created <span class=\"token operator\">=</span> now <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      AddExpense\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> <span class=\"token string\">\"Some beers with the boyz\"</span>\n             Amount <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">.</span>\n             Rule <span class=\"token operator\">=</span> None\n             Created <span class=\"token operator\">=</span> now <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Msg</span> <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> AddIncome <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n    <span class=\"token operator\">|</span> AddExpense <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n    <span class=\"token operator\">|</span> LoadEvents\n    <span class=\"token operator\">|</span> EventsLoaded <span class=\"token keyword\">of</span> <span class=\"token class-name\">Event</span> list\n    <span class=\"token operator\">|</span> NetworkError <span class=\"token keyword\">of</span> <span class=\"token class-name\">exn</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Model</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">{</span> Events<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Event</span> list\n      IsLoading<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> <span class=\"token function\">fetchEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token computation-expression keyword\">promise</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">do</span><span class=\"token operator\">!</span> Promise<span class=\"token punctuation\">.</span>sleep <span class=\"token number\">500</span>\n        <span class=\"token keyword\">return</span> sampleEvents\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> postEvents events _ <span class=\"token operator\">=</span> printfn <span class=\"token string\">\"Posting events %A to the backend\"</span> events\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> init _ <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">{</span> IsLoading <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span>\n      Events <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Cmd<span class=\"token punctuation\">.</span>OfPromise<span class=\"token punctuation\">.</span>either fetchEvents <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> EventsLoaded NetworkError\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> update <span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    JS<span class=\"token punctuation\">.</span>console<span class=\"token punctuation\">.</span>log msg\n    <span class=\"token keyword\">match</span> msg <span class=\"token keyword\">with</span>\n    <span class=\"token operator\">|</span> EventsLoaded events <span class=\"token operator\">-></span>\n        <span class=\"token punctuation\">{</span> model <span class=\"token keyword\">with</span>\n              Events <span class=\"token operator\">=</span> events\n              IsLoading <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Cmd<span class=\"token punctuation\">.</span>none\n    <span class=\"token operator\">|</span> AddIncome <span class=\"token keyword\">event</span>\n    <span class=\"token operator\">|</span> AddExpense <span class=\"token keyword\">event</span> <span class=\"token operator\">-></span>\n        <span class=\"token punctuation\">{</span> model <span class=\"token keyword\">with</span> Events <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Event<span class=\"token punctuation\">.</span>AddIncome <span class=\"token keyword\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">::</span> model<span class=\"token punctuation\">.</span>Events <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Cmd<span class=\"token punctuation\">.</span>ofSub <span class=\"token punctuation\">(</span>postEvents <span class=\"token punctuation\">[</span> <span class=\"token keyword\">event</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token operator\">|</span> _ <span class=\"token operator\">-></span> failwithf <span class=\"token string\">\"Msg %A not implemented\"</span> msg\n\n<span class=\"token annotation\"><span class=\"token punctuation\">[&lt;</span><span class=\"token class-name\">NoComparison</span><span class=\"token punctuation\">>]</span></span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AppContext</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">{</span> Model<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Model</span>\n      Dispatch<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dispatch</span><span class=\"token operator\">&lt;</span>Msg<span class=\"token operator\">></span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> defaultContextValue<span class=\"token punctuation\">:</span> <span class=\"token class-name\">AppContext</span> <span class=\"token operator\">=</span> Fable<span class=\"token punctuation\">.</span>Core<span class=\"token punctuation\">.</span>JS<span class=\"token punctuation\">.</span>undefined\n<span class=\"token keyword\">let</span> appContext <span class=\"token operator\">=</span> ReactBindings<span class=\"token punctuation\">.</span>React<span class=\"token punctuation\">.</span>createContext <span class=\"token punctuation\">(</span>defaultContextValue<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> ElmishCapture <span class=\"token operator\">=</span>\n    FunctionComponent<span class=\"token punctuation\">.</span>Of\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">|</span> children<span class=\"token punctuation\">:</span> <span class=\"token class-name\">ReactElement</span><span class=\"token punctuation\">;</span> loading<span class=\"token punctuation\">:</span> <span class=\"token class-name\">ReactElementType</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n\n            <span class=\"token keyword\">let</span> initialModel <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|></span> fst\n\n            <span class=\"token keyword\">let</span> state<span class=\"token punctuation\">:</span> <span class=\"token class-name\">IStateHook</span><span class=\"token operator\">&lt;</span>AppContext<span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n                Hooks<span class=\"token punctuation\">.</span>useState\n                    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Model <span class=\"token operator\">=</span> initialModel\n                       Dispatch <span class=\"token operator\">=</span> ignore <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">let</span> isMounted <span class=\"token operator\">=</span> Hooks<span class=\"token punctuation\">.</span>useState <span class=\"token punctuation\">(</span><span class=\"token keyword\">false</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">let</span> view model dispatch <span class=\"token operator\">=</span>\n                state<span class=\"token punctuation\">.</span>update\n                    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Model <span class=\"token operator\">=</span> model\n                       Dispatch <span class=\"token operator\">=</span> dispatch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n            Hooks<span class=\"token punctuation\">.</span>useEffect\n                <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n                    isMounted<span class=\"token punctuation\">.</span>update <span class=\"token punctuation\">(</span><span class=\"token keyword\">true</span><span class=\"token punctuation\">)</span>\n                    Program<span class=\"token punctuation\">.</span>mkProgram init update view <span class=\"token operator\">|></span> Program<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Array<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> isMounted<span class=\"token punctuation\">.</span>current\n            <span class=\"token keyword\">then</span> contextProvider appContext state<span class=\"token punctuation\">.</span>current <span class=\"token punctuation\">[</span> props<span class=\"token punctuation\">.</span>children <span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">else</span> ReactBindings<span class=\"token punctuation\">.</span>React<span class=\"token punctuation\">.</span>createElement <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n         <span class=\"token string\">\"ElmishCapture\"</span><span class=\"token punctuation\">,</span> memoEqualsButFunctions<span class=\"token punctuation\">)</span></code></pre></div>\n<p>The <code class=\"language-text\">ElmishCapture</code> will start the <code class=\"language-text\">Program</code> once it has been mounted. Then the view function captures <code class=\"language-text\">Model</code> and <code class=\"language-text\">Dispatch</code> in the component’s local state.\nAnd that state is being passed as argument for the <code class=\"language-text\">AppContext</code>.\nCheck out <a href=\"https://reactjs.org/docs/context.html\">React Context</a> to learn more.</p>\n<h3 id=\"usage-in-react\" style=\"position:relative;\"><a href=\"#usage-in-react\" aria-label=\"usage in react permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage in React</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./bin/Main'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ElmishCapture <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./bin/Main'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Loading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ElmishCapture</span></span> <span class=\"token attr-name\">loading</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Loading<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        My App here\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ElmishCapture</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Fable splitter compiles our code to <code class=\"language-text\">src/bin</code>, so now we can wrap the existing <code class=\"language-text\">&lt;App /></code> with <code class=\"language-text\">ElmishCapture</code>.</p>\n<h3 id=\"hooks\" style=\"position:relative;\"><a href=\"#hooks\" aria-label=\"hooks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hooks</h3>\n<p>How do we access the <code class=\"language-text\">Model</code> and <code class=\"language-text\">Dispatch</code> directly? The answer here lies within <a href=\"https://reactjs.org/docs/hooks-intro.html\">React Hooks</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> <span class=\"token function\">useModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> Model <span class=\"token operator\">=</span> model <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Hooks<span class=\"token punctuation\">.</span>useContext <span class=\"token punctuation\">(</span>appContext<span class=\"token punctuation\">)</span>\n    model\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> Dispatch <span class=\"token operator\">=</span> dispatch <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Hooks<span class=\"token punctuation\">.</span>useContext <span class=\"token punctuation\">(</span>appContext<span class=\"token punctuation\">)</span>\n    dispatch</code></pre></div>\n<h4 id=\"dispatching-messages\" style=\"position:relative;\"><a href=\"#dispatching-messages\" aria-label=\"dispatching messages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dispatching messages</h4>\n<p>Be that as it may, we are not going to access the <code class=\"language-text\">Model</code> and <code class=\"language-text\">Dispatch</code>directly. Creating a <code class=\"language-text\">Msg</code> in JavaScript is hard because the output of the Fable isn’t really that nice.</p>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">open</span> System\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Amount</span> <span class=\"token operator\">=</span> double\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Year</span> <span class=\"token operator\">=</span> int\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Month</span> <span class=\"token operator\">=</span> int\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Id</span> <span class=\"token operator\">=</span> System<span class=\"token punctuation\">.</span>Guid\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Transaction</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">{</span> Name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">string</span>\n      Amount<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Amount</span>\n      Rule<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Id</span> option\n      Created<span class=\"token punctuation\">:</span> <span class=\"token class-name\">DateTime</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Msg</span> <span class=\"token operator\">=</span>\n    <span class=\"token operator\">|</span> AddIncome <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n    <span class=\"token operator\">|</span> AddExpense <span class=\"token keyword\">of</span> <span class=\"token class-name\">Transaction</span>\n\n<span class=\"token keyword\">let</span> myExpense <span class=\"token operator\">=</span>\n    Msg<span class=\"token punctuation\">.</span>AddExpense\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> <span class=\"token string\">\"Movie night\"</span>\n             Amount <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">.</span>\n             Rule <span class=\"token operator\">=</span> None\n             Created <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span>Now <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>is compiled to</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token computation-expression keyword\">import</span> <span class=\"token punctuation\">{</span> Union<span class=\"token punctuation\">,</span> declare<span class=\"token punctuation\">,</span> Record <span class=\"token punctuation\">}</span> from <span class=\"token string\">\"fable-library/Types.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token computation-expression keyword\">import</span> <span class=\"token punctuation\">{</span> union<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">,</span> option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">,</span> float64<span class=\"token punctuation\">,</span> string <span class=\"token punctuation\">}</span> from <span class=\"token string\">\"fable-library/Reflection.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token computation-expression keyword\">import</span> <span class=\"token punctuation\">{</span> now <span class=\"token punctuation\">}</span> from <span class=\"token string\">\"fable-library/Date.js\"</span><span class=\"token punctuation\">;</span>\nexport <span class=\"token keyword\">const</span> Transaction <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">Test_Transaction</span><span class=\"token punctuation\">(</span>arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">,</span> arg3<span class=\"token punctuation\">,</span> arg4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  this<span class=\"token punctuation\">.</span>Name <span class=\"token operator\">=</span> arg1<span class=\"token punctuation\">;</span>\n  this<span class=\"token punctuation\">.</span>Amount <span class=\"token operator\">=</span> arg2<span class=\"token punctuation\">;</span>\n  this<span class=\"token punctuation\">.</span>Rule <span class=\"token operator\">=</span> arg3<span class=\"token punctuation\">;</span>\n  this<span class=\"token punctuation\">.</span>Created <span class=\"token operator\">=</span> arg4<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nexport <span class=\"token keyword\">function</span> Transaction$<span class=\"token function\">reflection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">record</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test.Transaction\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Transaction<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Amount\"</span><span class=\"token punctuation\">,</span> float64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Rule\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">option</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">type</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"System.Guid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Created\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"System.DateTime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nexport <span class=\"token keyword\">const</span> Msg <span class=\"token operator\">=</span> <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">Test_Msg</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Union<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>this<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Union<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nexport <span class=\"token keyword\">function</span> Msg$<span class=\"token function\">reflection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">union</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Test.Msg\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Msg<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"AddIncome\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Transaction$<span class=\"token function\">reflection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"AddExpense\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Transaction$<span class=\"token function\">reflection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nexport <span class=\"token keyword\">const</span> myExpense <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"AddExpense\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Transaction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Movie night\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The <code class=\"language-text\">new Msg(1, \"AddExpense\", new Transaction(\"Movie night\", 30, null, now()));</code> part isn’t really what we want to write ourselves here.\nIt would be better to encapsulate this in a hook.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> <span class=\"token function\">useAddEntry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">|</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">string</span><span class=\"token punctuation\">;</span> amount<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Amount</span><span class=\"token punctuation\">;</span> isIncome<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n        <span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span>Now\n\n        <span class=\"token keyword\">let</span> entry <span class=\"token operator\">=</span>\n            <span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>name\n              Amount <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>amount\n              Rule <span class=\"token operator\">=</span> None\n              Created <span class=\"token operator\">=</span> today <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">let</span> msg <span class=\"token operator\">=</span>\n            <span class=\"token keyword\">if</span> input<span class=\"token punctuation\">.</span>isIncome <span class=\"token keyword\">then</span> AddIncome entry <span class=\"token keyword\">else</span> AddExpense entry\n\n        dispatch msg</code></pre></div>\n<p>This hook returns function that can be called in function component.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">HomePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> addEntry <span class=\"token operator\">=</span> <span class=\"token function\">useAddEntry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">addEntry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"My new entry\"</span><span class=\"token punctuation\">,</span> \n                                       <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> \n                                       <span class=\"token string-property property\">\"isIncome\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">imagine a form here...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Yet there is another problem.\nWhen we create a function in Fable that returns a function it doesn’t compile to what we think it would.</p>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> a <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">fun</span> b <span class=\"token operator\">-></span> b</code></pre></div>\n<p>compiles to</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">unitVar0<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So, when calling the function <code class=\"language-text\">a</code>, it will immediately be executed.\nTo overcome this we can wrap the lambda in a <code class=\"language-text\">System.Func&lt;_,_></code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> a <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> System<span class=\"token punctuation\">.</span>Func<span class=\"token operator\">&lt;</span>_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> b <span class=\"token operator\">-></span> b<span class=\"token punctuation\">)</span></code></pre></div>\n<p>so that it compiles to</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> b<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We can write a little helper function to make everything less verbose:</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">private</span> f g <span class=\"token operator\">=</span> System<span class=\"token punctuation\">.</span>Func<span class=\"token operator\">&lt;</span>_<span class=\"token punctuation\">,</span> _<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function\">useAddEntry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">|</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">string</span><span class=\"token punctuation\">;</span> amount<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Amount</span><span class=\"token punctuation\">;</span> isIncome<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n        <span class=\"token keyword\">let</span> today <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span>Now\n\n        <span class=\"token keyword\">let</span> entry <span class=\"token operator\">=</span>\n            <span class=\"token punctuation\">{</span> Name <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>name\n              Amount <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>amount\n              Rule <span class=\"token operator\">=</span> None\n              Created <span class=\"token operator\">=</span> today <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">let</span> msg <span class=\"token operator\">=</span>\n            <span class=\"token keyword\">if</span> input<span class=\"token punctuation\">.</span>isIncome <span class=\"token keyword\">then</span> AddIncome entry <span class=\"token keyword\">else</span> AddExpense entry\n\n        dispatch msg\n    <span class=\"token operator\">|></span> f</code></pre></div>\n<h4 id=\"reading-fragments-of-the-model\" style=\"position:relative;\"><a href=\"#reading-fragments-of-the-model\" aria-label=\"reading fragments of the model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reading fragments of the Model</h4>\n<p>Accessing the <code class=\"language-text\">Model</code> is very straightforward.\nWe can project the <code class=\"language-text\">Model</code> in F# to match the shape we need for the presentation.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">let</span> <span class=\"token function\">useEntries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> Events <span class=\"token operator\">=</span> events <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">let</span> sortMapAndToArray <span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Transaction</span> seq<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\n        input\n        <span class=\"token operator\">|></span> Seq<span class=\"token punctuation\">.</span>sortBy <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> ai <span class=\"token operator\">-></span> ai<span class=\"token punctuation\">.</span>Created<span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|></span> Seq<span class=\"token punctuation\">.</span>map <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> ai <span class=\"token operator\">-></span>\n            <span class=\"token punctuation\">{</span><span class=\"token operator\">|</span> name <span class=\"token operator\">=</span> ai<span class=\"token punctuation\">.</span>Name\n               amount <span class=\"token operator\">=</span> ai<span class=\"token punctuation\">.</span>Amount <span class=\"token operator\">|</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|></span> Seq<span class=\"token punctuation\">.</span>toArray\n\n    <span class=\"token keyword\">let</span> income <span class=\"token operator\">=</span>\n        events\n        <span class=\"token operator\">|></span> Seq<span class=\"token punctuation\">.</span>choose <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span>\n            <span class=\"token operator\">|</span> Event<span class=\"token punctuation\">.</span><span class=\"token function\">AddIncome</span><span class=\"token punctuation\">(</span>ai<span class=\"token punctuation\">)</span> <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>Projections<span class=\"token punctuation\">.</span>isInCurrentMonth ai<span class=\"token punctuation\">.</span>Created<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Some ai\n            <span class=\"token operator\">|</span> _ <span class=\"token operator\">-></span> None<span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|></span> sortMapAndToArray\n\n    <span class=\"token keyword\">let</span> expenses <span class=\"token operator\">=</span>\n        events\n        <span class=\"token operator\">|></span> Seq<span class=\"token punctuation\">.</span>choose <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span>\n            <span class=\"token operator\">|</span> Event<span class=\"token punctuation\">.</span><span class=\"token function\">AddExpense</span><span class=\"token punctuation\">(</span>ae<span class=\"token punctuation\">)</span> <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>Projections<span class=\"token punctuation\">.</span>isInCurrentMonth ae<span class=\"token punctuation\">.</span>Created<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Some ae\n            <span class=\"token operator\">|</span> _ <span class=\"token operator\">-></span> None<span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">|></span> sortMapAndToArray\n\n    <span class=\"token punctuation\">(</span>income<span class=\"token punctuation\">,</span> expenses<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Which then later can be used in:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Container <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"reactstrap\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> EntryList<span class=\"token punctuation\">,</span> Header<span class=\"token punctuation\">,</span> Loader<span class=\"token punctuation\">,</span> EntryForm <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEntries<span class=\"token punctuation\">,</span> useIsLoading<span class=\"token punctuation\">,</span> useAddEntry <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../bin/Main\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">HomePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>income<span class=\"token punctuation\">,</span> expenses<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useEntries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isLoading <span class=\"token operator\">=</span> <span class=\"token function\">useIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> addEntry <span class=\"token operator\">=</span> <span class=\"token function\">useAddEntry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Container</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"my-4\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Income</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EntryList</span></span> <span class=\"token attr-name\">entries</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>income<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Expenses</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EntryList</span></span> <span class=\"token attr-name\">entries</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>expenses<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Container</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Container</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add entry</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EntryForm</span></span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>addEntry<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Container</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> isLoading <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loader</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> body<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HomePage<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"formatting\" style=\"position:relative;\"><a href=\"#formatting\" aria-label=\"formatting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formatting</h2>\n<p>Great, it looks like everything is place now. We can access the model, dispatch messages and manage the state in F#.\nTo wrap up, I want to extend the build script to format all the code.</p>\n<p>For the JavaScript I’m going to use <a href=\"https://prettier.io/\">Prettier</a> and for F# I can use <a href=\"https://github.com/fsprojects/fantomas\">Fantomas</a>.</p>\n<h3 id=\"prettier\" style=\"position:relative;\"><a href=\"#prettier\" aria-label=\"prettier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prettier</h3>\n<p>Prettier is very straightforward, add it with Yarn and create a script in the <code class=\"language-text\">package.json</code>.</p>\n<blockquote>\n<p>yarn add prettier</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"capital-guardian\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"fable-compiler\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.4.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"fable-splitter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.11\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prettier\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.19.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.12.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-dom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^16.12.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"react-scripts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3.2.0\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"eject\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts eject\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"fable\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fable-splitter fsharp/Main.fsx -o src/bin\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prebuild\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn fable\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prettier ./src/**/*.js --write\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We don’t want Prettier to format the code generated by Fable.\nTo avoid this, add an <code class=\"language-text\">.prettierignore</code> file with <code class=\"language-text\">src/bin</code>.</p>\n<h3 id=\"fantomas\" style=\"position:relative;\"><a href=\"#fantomas\" aria-label=\"fantomas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fantomas</h3>\n<p>Fantomas can easily be used in a FAKE target.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">open</span> Fake<span class=\"token punctuation\">.</span>IO<span class=\"token punctuation\">.</span>Globbing<span class=\"token punctuation\">.</span>Operators\n<span class=\"token keyword\">open</span> Fantomas<span class=\"token punctuation\">.</span>FakeHelpers\n<span class=\"token keyword\">open</span> Fantomas<span class=\"token punctuation\">.</span>FormatConfig\n\nTarget<span class=\"token punctuation\">.</span>create <span class=\"token string\">\"Format\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">fun</span> _ <span class=\"token operator\">-></span>\n    <span class=\"token keyword\">let</span> fantomasConfig <span class=\"token operator\">=</span>\n        <span class=\"token punctuation\">{</span> FormatConfig<span class=\"token punctuation\">.</span>Default <span class=\"token keyword\">with</span>\n              ReorderOpenDeclaration <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span>\n              KeepNewlineAfter <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span> <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> fsharpFiles <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>clientPath <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\"fsharp\"</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token string\">\"*.fsx\"</span><span class=\"token punctuation\">)</span>\n        \n    fsharpFiles\n    <span class=\"token operator\">|></span> formatCode fantomasConfig\n    <span class=\"token operator\">|></span> Async<span class=\"token punctuation\">.</span>RunSynchronously\n    <span class=\"token operator\">|></span> printfn <span class=\"token string\">\"Formatted F# files: %A\"</span>\n\n    Yarn<span class=\"token punctuation\">.</span>exec <span class=\"token string\">\"format\"</span> setYarnWorkingDirectory<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Trigger it with <code class=\"language-text\">dotnet fake run build.fsx -t Format</code> and both languages will be handled.</p>\n<h2 id=\"the-source\" style=\"position:relative;\"><a href=\"#the-source\" aria-label=\"the source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The source</h2>\n<p>You can find the source on my <a href=\"https://github.com/nojaf/capital-guardian/tree/blogpost\">GitHub</a>.<br />\nNotice that the code for this blog post is preserved in the <code class=\"language-text\">blogpost</code> branch.</p>\n<p>The master branch will be used to finish the application.<br />\nAt the time of writing I still have these intentions 😄.</p>\n<p>The <code class=\"language-text\">blogpost</code> branch also contains some additional setup for the back-end.\nAnd it is fleshed out to have a first usable functionality.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2252e5e58a7f80c338fd07acecd7f9a0/33d1d/create-react-app-with-fable-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdUlEQVR42q1TaWvDMAz1//9r+zIYZR82WJqrpHHuw3fekJKMrjvawQQPW5Ys60mWCG5CcB289yilRJ7niKIjpKwQxwnSLENV10jTDNHxiLqukSQpqqrCuSzxFsVouxkkFEvgSpxzsNbBWAvnPCyvjmGM+dBpT3atOvT1C+buFVaVEGRQSnGGy7IwgIWDr/uvculjVIvq9IixeoKecgiilp9OMMZuzrhLyI8yvRYxDAOGceQMd0q/wWyr1hpFcYbSGtYaGKP5ATEMI9q2xTzPf8I0Tej7/pNOCYmiKBAnCZq2xX+I6PuVcghh7ab3N0HlIdr0zagEpNNdisE1rJuGO82p38K0UhzHEU3T8NknyrSRUvIBBdXGQGuzrju0XrHZ9q9GQc3ur7emkKHvenRdxyD9HlACxG7XKUsqgyjLEmmW86j9JFQbINzXFKrJuPHnojvPAUJYNmoah+cDZP6AJSiej32ivoO4HqnLcdt1zw9so3kj4Dt+jkW71RyqlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Create React App with Fable Result\"\n        title=\"Create React App with Fable Result\"\n        src=\"/static/2252e5e58a7f80c338fd07acecd7f9a0/fcda8/create-react-app-with-fable-result.png\"\n        srcset=\"/static/2252e5e58a7f80c338fd07acecd7f9a0/12f09/create-react-app-with-fable-result.png 148w,\n/static/2252e5e58a7f80c338fd07acecd7f9a0/e4a3f/create-react-app-with-fable-result.png 295w,\n/static/2252e5e58a7f80c338fd07acecd7f9a0/fcda8/create-react-app-with-fable-result.png 590w,\n/static/2252e5e58a7f80c338fd07acecd7f9a0/efc66/create-react-app-with-fable-result.png 885w,\n/static/2252e5e58a7f80c338fd07acecd7f9a0/33d1d/create-react-app-with-fable-result.png 1150w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"final-words\" style=\"position:relative;\"><a href=\"#final-words\" aria-label=\"final words permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final words</h2>\n<p>I don’t believe the Mandalorian would say <em>“This is the way”</em>, in terms of this approach.\nThere are pros and cons to it and it certainly is not a silver bullet.</p>\n<h3 id=\"pros\" style=\"position:relative;\"><a href=\"#pros\" aria-label=\"pros permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pros</h3>\n<ul>\n<li>Much easier to use the vast existing JavaScript ecosystem. I’ve used <a href=\"https://reactstrap.github.io/\">reactstrap</a>, <a href=\"https://react-hook-form.com/\">react-form-hook</a>, <a href=\"https://github.com/jquense/yup\">yup</a>, <a href=\"https://react-switch.netlify.com/\">react-switch</a> without the need of writing a single binding file.</li>\n<li>No need for any webpack stuff! For me this is a big win, even when I wanted to use Sass the documentation of <em>Create React Application</em> was dead simple and it a minute later everything was up and running.</li>\n<li>Tooling for React is vastly superior. I’m using Rider and all the good magic of WebStorm for React components is available for me.</li>\n<li>The formatting story is nicer, Fantomas is not that good with formatting Elmish views. I’m aware of this and it is just hard to get right. So, I’m happy that I can use Prettier for that.</li>\n</ul>\n<h3 id=\"cons\" style=\"position:relative;\"><a href=\"#cons\" aria-label=\"cons permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cons</h3>\n<ul>\n<li>Part of the application is no longer statically typed. It provides speed but a what cost, right?</li>\n<li>The initial setup is rather time consuming. Doing the whole FAKE setup to have everything in place took some time. However, I really enjoyed it so I didn’t really mind.</li>\n<li>The output of the console is less clear. Since we are using two processes to compile all the code to JavaScript, it can get hard to spot what is going wrong from time to time. Create React Application has the habit of clearing the screen when it compiles.</li>\n</ul>\n<p>Consequentially, you need to scroll to see the F# error you might have.</p>\n<p>Overall, I like this, and time will tell if this ends up to be my new default or not.\nThanks for reading this far and I hope you enjoy the rest the of <strong>F# Advent calendar</strong>!</p>\n<p>Yours truly,<br>\nnojaf</p>\n<p>Photo by <a style=\"background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px\" href=\"https://unsplash.com/@aditya1702?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"Download free do whatever you want high-resolution photos from Aditya Vyas\"><span style=\"display:inline-block;padding:2px 3px\"><svg xmlns=\"http://www.w3.org/2000/svg\" style=\"height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white\" viewBox=\"0 0 32 32\"><title>unsplash-logo</title><path d=\"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z\"></path></svg></span><span style=\"display:inline-block;padding:2px 3px\">Aditya Vyas</span></a></p>","frontmatter":{"title":"Using Create React App with Fable","date":"2019-12-10","path":"2019/12/10/using-create-react-app-with-fable/","tags":["javascript","fable","fsharp","react"],"cover":{"publicURL":"/static/1880dcb076c671b328364c0799d3bb00/create-react-app-with-fable.jpg"},"backgroundPosition":null}}},"pageContext":{"slug":"/using-create-react-app-with-fable/","previous":{"fields":{"slug":"/building-fable-on-travis-ci/"},"frontmatter":{"title":"Building Fable on Travis CI","path":"2019/09/01/building-fable-on-travis/","tags":["javascript","fable","fsharp"]}},"next":{"fields":{"slug":"/fantomas-configuration-file/"},"frontmatter":{"title":"Fantomas configuration file","path":"2020/10/01/fantomas-configuration-file/","tags":["open-source","fsharp"]}}}},"staticQueryHashes":["3128451518","677231581"],"slicesMap":{}}